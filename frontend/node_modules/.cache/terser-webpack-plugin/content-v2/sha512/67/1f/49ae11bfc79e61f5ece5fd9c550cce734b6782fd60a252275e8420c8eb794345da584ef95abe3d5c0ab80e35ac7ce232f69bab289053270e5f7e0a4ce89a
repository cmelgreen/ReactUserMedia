{"map":{"version":3,"sources":["static/js/main.0d4d3ab7.chunk.js"],"names":["this","push","10","module","exports","__webpack_require__","16","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","regenerator","regenerator_default","asyncToGenerator","slicedToArray","createForOfIteratorHelper","classCallCheck","createClass","newWebRTCClient","conn","webRTCRefactor_connHandler","startUserMedia","sendIceCandidates","startListener","source","defaultIceServers","iceServers","urls","connHandler","_this","Object","socket","WebSocket","window","location","hostname","peerConnection","RTCPeerConnection","listener","onnegotiationneeded","e","send","key","value","payload","JSON","stringify","_startStream","a","mark","_callee","_iterator","_step","track","wrap","_context","prev","next","navigator","mediaDevices","getUserMedia","video","sent","getVideoTracks","s","done","addTrack","err","f","stop","apply","arguments","_this2","onicecandidate","event","candidate","_this3","onmessage","message","parse","data","sdp","setRemoteDescription","RTCSessionDescription","createAnswer","then","answer","setLocalDescription","addIceCandidate","Camera","stream","_useState","_useState2","setStream","startStream","UserMedia","current","srcObject","play","createElement","Fragment","ref","width","height","autoPlay","App_element","App","rootElement","document","getElementById","render"],"mappings":"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"},"code":"(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{10:function(e,n,t){e.exports=t(16)},16:function(e,n,t){\"use strict\";t.r(n);var r=t(0),a=t.n(r),c=t(5),i=t.n(c),s=t(1),o=t.n(s),u=t(2),d=t(9),l=t(6),f=t(7),p=t(8);function h(){var e=new w;return e.startUserMedia(),e.sendIceCandidates(),e.startListener(),e.source}var v={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},w=function(){function e(){var n=this;Object(f.a)(this,e),this.socket=new WebSocket(\"ws://\"+window.location.hostname+\":8080/ws\"),this.peerConnection=new RTCPeerConnection(v),this.source=null,this.listener=null,this.peerConnection.onnegotiationneeded=function(e){n.send(\"renegotiate\")}}return Object(p.a)(e,[{key:\"send\",value:function(e){this.socket.send(JSON.stringify(e))}},{key:\"startUserMedia\",value:function(){var e=this;(function(){var n=Object(u.a)(o.a.mark((function n(){var t,r,a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.mediaDevices.getUserMedia({video:!0});case 2:this.source=n.sent,t=Object(l.a)(this.source.getVideoTracks());try{for(t.s();!(r=t.n()).done;)a=r.value,e.peerConnection.addTrack(a,this.source)}catch(c){t.e(c)}finally{t.f()}case 5:case\"end\":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}})()()}},{key:\"sendIceCandidates\",value:function(){var e=this;this.peerConnection.onicecandidate=function(n){null!=n.candidate&&e.send(n.candidate)}}},{key:\"startListener\",value:function(){var e=this;this.socket.onmessage=function(n){var t=JSON.parse(n.data);t.sdp?(e.peerConnection.setRemoteDescription(new RTCSessionDescription(t)),e.peerConnection.createAnswer().then((function(n){e.peerConnection.setLocalDescription(n),e.send(n)}))):t.candidate&&e.peerConnection.addIceCandidate(t)}}}]),e}();function k(){var e=Object(r.useRef)(),n=function(){var e=Object(r.useState)(null),n=Object(d.a)(e,2),t=n[0],a=n[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:n=e.sent,a(n);case 4:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),t}();return n&&e.current&&(e.current.srcObject=n,e.current.play()),a.a.createElement(a.a.Fragment,null,a.a.createElement(\"video\",{ref:e,width:\"640\",height:\"480\",autoPlay:!0}))}var m=a.a.createElement(k,null);function C(){return m}var b=document.getElementById(\"root\");i.a.render(a.a.createElement(C,null),b)}},[[10,1,2]]]);","extractedComments":[]}