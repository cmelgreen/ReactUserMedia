{"map":{"version":3,"sources":["static/js/main.152d3efe.chunk.js"],"names":["this","push","10","module","exports","__webpack_require__","16","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","regenerator","regenerator_default","createForOfIteratorHelper","asyncToGenerator","classCallCheck","createClass","defaultIceServers","iceServers","urls","userMediaSettings","video","webRTCClient_connHandler","connHandler","_this","Object","socket","WebSocket","window","location","hostname","peerConnection","RTCPeerConnection","source","listener","onnegotiationneeded","e","send","key","value","payload","JSON","stringify","conn","_startStream","a","mark","_callee","_iterator","_step","track","wrap","_context","prev","next","navigator","mediaDevices","getUserMedia","sent","getVideoTracks","s","done","addTrack","err","f","stop","apply","arguments","_this2","onicecandidate","event","candidate","_this3","onmessage","message","parse","data","sdp","setRemoteDescription","RTCSessionDescription","createAnswer","then","answer","setLocalDescription","addIceCandidate","UserMedia","_useState","_useState2","stream","startUserMedia","sendIceCandidates","startListener","webRTCClient","Camera","current","srcObject","play","createElement","Fragment","ref","width","height","muted","autoPlay","App_element","App","rootElement","document","getElementById","render"],"mappings":"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"},"code":"(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{10:function(e,n,t){e.exports=t(16)},16:function(e,n,t){\"use strict\";t.r(n);var r=t(0),a=t.n(r),i=t(4),c=t.n(i),s=t(9),o=t(2),u=t.n(o),d=t(5),l=t(6),f=t(7),p=t(8);var v={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},h={video:!0},w=function(){function e(){var n=this;Object(f.a)(this,e),this.socket=new WebSocket(\"ws://\"+window.location.hostname+\":8080/ws\"),this.peerConnection=new RTCPeerConnection(v),this.source=null,this.listener=null,this.peerConnection.onnegotiationneeded=function(e){n.send(\"renegotiate\")}}return Object(p.a)(e,[{key:\"send\",value:function(e){this.socket.send(JSON.stringify(e))}},{key:\"startUserMedia\",value:function(){var e=this;(function(){var n=Object(l.a)(u.a.mark((function n(){var t,r,a,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.mediaDevices.getUserMedia(h);case 2:t=n.sent,r=Object(d.a)(t.getVideoTracks());try{for(r.s();!(a=r.n()).done;)i=a.value,e.peerConnection.addTrack(i,t)}catch(c){r.e(c)}finally{r.f()}case 5:case\"end\":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}},{key:\"sendIceCandidates\",value:function(){var e=this;this.peerConnection.onicecandidate=function(n){null!=n.candidate&&e.send(n.candidate)}}},{key:\"startListener\",value:function(){var e=this;this.socket.onmessage=function(n){var t=JSON.parse(n.data);t.sdp?(e.peerConnection.setRemoteDescription(new RTCSessionDescription(t)),e.peerConnection.createAnswer().then((function(n){e.peerConnection.setLocalDescription(n),e.send(n)}))):t.candidate&&e.peerConnection.addIceCandidate(t)}}}]),e}();function m(){var e=Object(r.useState)(null),n=Object(s.a)(e,2),t=n[0];n[1];return Object(r.useEffect)((function(){!function(){var e=new w;e.startUserMedia(),e.sendIceCandidates(),e.startListener()}()}),[]),t}function C(){var e=Object(r.useRef)(),n=m();return n&&e.current&&(e.current.srcObject=n,e.current.play()),a.a.createElement(a.a.Fragment,null,a.a.createElement(\"video\",{ref:e,width:\"640\",height:\"480\",muted:\"muted\",autoPlay:!0}))}var k=a.a.createElement(C,null);function b(){return k}var g=document.getElementById(\"root\");c.a.render(a.a.createElement(b,null),g)}},[[10,1,2]]]);","extractedComments":[]}