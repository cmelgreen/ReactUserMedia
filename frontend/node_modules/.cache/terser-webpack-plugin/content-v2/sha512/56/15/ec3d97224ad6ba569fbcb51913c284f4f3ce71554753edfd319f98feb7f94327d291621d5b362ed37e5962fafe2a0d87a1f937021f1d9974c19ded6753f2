{"map":{"version":3,"sources":["static/js/main.9081503f.chunk.js"],"names":["this","push","10","module","exports","__webpack_require__","16","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","classCallCheck","createClass","defaultIceServers","iceServers","urls","webRTCRefactor_connHandler","connHandler","_this","Object","socket","WebSocket","window","location","hostname","peerConnection","RTCPeerConnection","listener","onnegotiationneeded","e","console","log","send","key","value","_this2","onmessage","event","message","JSON","parse","data","sdp","receiveDesc","candidate","receiveICECandidate","payload","stringify","type","setRemoteDescription","RTCSessionDescription","sendAnswer","conn","createAnswer","then","answer","setLocalDescription","_this3","onicecandidate","socketOpen","addIceCandidate","readyState","OPEN","UserMedia","_useState","_useState2","stream","setStream","startUserMedia","sendIceCandidates","startListener","newWebRTCClient","Camera","video","current","srcObject","play","a","createElement","Fragment","ref","width","height","autoPlay","App_element","App","rootElement","document","getElementById","render"],"mappings":"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"},"code":"(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{10:function(e,n,t){e.exports=t(16)},16:function(e,n,t){\"use strict\";t.r(n);var o=t(0),s=t.n(o),c=t(4),i=t.n(c),r=t(9),a=(t(2),t(5),t(6),t(7)),u=t(8);var d={iceServers:[{urls:\"stun:stun.l.google.com:19302\"}]},l=function(){function e(){var n=this;Object(a.a)(this,e),this.socket=new WebSocket(\"ws://\"+window.location.hostname+\":8050/ws\"),this.peerConnection=new RTCPeerConnection(d),this.listener=null,this.peerConnection.onnegotiationneeded=function(e){console.log(\"negotiation needed\"),n.send(\"renegotiate\")}}return Object(u.a)(e,[{key:\"startUserMedia\",value:function(){}},{key:\"startListener\",value:function(){var e=this;console.log(\"startListener\"),this.socket.onmessage=function(n){var t=JSON.parse(n.data);t.sdp?e.receiveDesc(t):t.candidate&&e.receiveICECandidate(t)}}},{key:\"send\",value:function(e){console.log(\"send: \",e),this.socket.send(JSON.stringify(e))}},{key:\"receiveDesc\",value:function(e){console.log(\"receiveDesc\",e.type),console.log(e.sdp),this.peerConnection.setRemoteDescription(new RTCSessionDescription(e)),\"offer\"==e.type&&this.sendAnswer()}},{key:\"sendAnswer\",value:function(){console.log(\"sendAnswer\");var e=this;e.peerConnection.createAnswer().then((function(n){return e.send(n),e.peerConnection.setLocalDescription(n)}))}},{key:\"sendIceCandidates\",value:function(){var e=this;return console.log(\"sendIceCandidate\"),this.peerConnection.onicecandidate=function(n){e.socketOpen()&&null!=n.candidate&&e.send(n.candidate)}}},{key:\"receiveICECandidate\",value:function(e){console.log(\"receiveICEcandidate: \",e),this.peerConnection.addIceCandidate(e)}},{key:\"socketOpen\",value:function(){return this.socket.readyState==WebSocket.OPEN}}]),e}();function f(){var e=Object(o.useState)(null),n=Object(r.a)(e,2),t=n[0],s=n[1];return Object(o.useEffect)((function(){s(function(){var e=new l;e.startUserMedia(),e.sendIceCandidates(),e.startListener()}())}),[]),t}function v(){var e=Object(o.useRef)(),n=f();return n&&e.current&&(e.current.srcObject=n,e.current.play()),s.a.createElement(s.a.Fragment,null,s.a.createElement(\"video\",{ref:e,width:\"640\",height:\"480\",autoPlay:!0}))}var h=s.a.createElement(v,null);function p(){return h}var C=document.getElementById(\"root\");i.a.render(s.a.createElement(p,null),C)}},[[10,1,2]]]);","extractedComments":[]}