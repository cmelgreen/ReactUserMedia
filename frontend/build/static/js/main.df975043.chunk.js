(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{12:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t.n(c),r=t(3),a=t.n(r),i=t(1),s=t.n(i),u=t(4),l=t(5);function d(e){var n=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]}),t=new WebSocket("ws://"+window.location.hostname+":8050/ws");n.addStream(e),n.createOffer().then((function(e){return n.setLocalDescription(e)})),n.onicecandidate=function(e){(function(e){return e.readyState==WebSocket.OPEN})(t)&&null!=e.candidate&&f(t,e.candidate)},function(e,n){e.onmessage=function(t){try{var c=JSON.parse(t.data);console.log("receiving: ",c),c.sdp?n.setRemoteDescription(new RTCSessionDescription(c),(function(){"offer"==n.remoteDescription.type&&n.createAnswer().then((function(t){return f(e,t),n.setLocalDescription(t)})).catch((function(e){return console.log(e)}))}),(function(e){return console.log("e")})):n.addIceCandidate(c).then(console.log("candidate added")).catch((function(e){return console.log(e)}))}catch(o){console.log("error: ",o),console.log("message: ")}}}(t,n)}function f(e,n){try{e.send(JSON.stringify(n)),console.log("sending: ",n)}catch(t){console.log(t)}}function p(){var e=Object(c.useRef)(),n=function(){var e=Object(c.useState)(null),n=Object(l.a)(e,2),t=n[0],o=n[1];return Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0});case 2:n=e.sent,o(n),d(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),t}();return n&&e.current&&(e.current.srcObject=n,e.current.play()),o.a.createElement(o.a.Fragment,null,o.a.createElement("video",{ref:e,width:"640",height:"480",autoPlay:!0}))}var g=o.a.createElement(p,null);function h(){return g}var m=document.getElementById("root");a.a.render(o.a.createElement(h,null),m)},6:function(e,n,t){e.exports=t(12)}},[[6,1,2]]]);
//# sourceMappingURL=main.df975043.chunk.js.map